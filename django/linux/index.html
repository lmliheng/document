<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="HENG" /><link rel="canonical" href="https://example.com/linux/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>部署笔记 - Django杂记</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "\u90e8\u7f72\u7b14\u8bb0";
        var mkdocs_page_input_path = "linux.md";
        var mkdocs_page_url = "/linux/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Django杂记
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">主页</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../settings/">配置文件</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../models/">模型</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../urls/">路由</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../view/">视图</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../admin/">管理员</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../template/">模板</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../static/">静态资源</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../database/">数据库</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../file/">文件上传与生成</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../cron/">定时任务</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../translator/">流媒体</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">部署笔记</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#_1">坑点：</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../codeplan/">计划表项目搭建</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../mkdocs/">mkdocs笔记</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../markdown/">Markdown格式</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Django杂记</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">部署笔记</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="linuxdjango">linux部署django笔记</h2>
<h3 id="_1">坑点：</h3>
<p>1.每个app都得有迁移入口文件 migrations/<strong>init</strong>.py</p>
<pre><code>   └─ myapp
      ├─ admin.py
      ├─ apps.py
      ├─ models.py
      ├─ tests.py
      ├─ uris.py
      ├─ views.py
      ├─ __init__.py
      └─ migrations
         └─ __init__.py
</code></pre>
<p>首先，确保您的系统已安装了 wget 和 tar 工具。如果没有，请使用以下命令安装它们：
<code>sudo yum install wget tar</code>
使用 wget 下载最新版本的 Python 源代码。您可以在 Python 官方下载页面 上找到最新版本的下载链接。例如，要下载 Python 3.11.0，请运行以下命令：
使用 curl 下载 Python 源代码：
<code>curl -O https://www.python.org/ftp/python/3.11.0/Python-3.11.0.tgz</code>
请注意，您可能需要根据最新版本的 Python 更改 URL。
如果您仍然遇到速度慢的问题，可以尝试使用国内的镜像源。例如，您可以使用阿里云的镜像源：
<code>wget https://mirrors.aliyun.com/python/3.11.0/Python-3.11.0.tgz</code>
或者使用腾讯云的镜像源：
<code>wget https://mirrors.cloud.tencent.com/python/3.11.0/Python-3.11.0.tgz</code>
<code>wget https://www.python.org/ftp/python/3.11.0/Python-3.11.0.tgz</code>
请注意，您可能需要根据最新版本的 Python 更改 URL。
解压下载的源代码文件：
<code>tar xvf Python-3.11.0.tgz</code>
进入解压后的目录：
<code>cd Python-3.11.0</code>
配置Python 3.11以准备编译：
<code>./configure --prefix=/opt/python3.11</code>
这将配置Python 3.11以便在/opt/python3.11目录中安装。您可以根据需要更改--prefix选项的值。
编译Python 3.11：
<code>make</code>
这将编译Python 3.11。编译过程可能需要一些时间，具体取决于您的系统性能。
安装Python 3.11：
<code>sudo make install</code>
这将将Python 3.11安装到之前配置的目录中。
将新安装的Python 3.11添加到PATH环境变量中。您可以通过将以下内容添加到您的.bashrc文件中来实现这一点：
<code>export PATH=/opt/python3.11/bin:$PATH</code>
然后，运行以下命令使更改生效：
<code>source ~/.bashrc</code>
现在，您应该可以使用新安装的Python 3.11了。要验证Python 3.11是否已成功安装并可以使用，请运行以下命令：
<code>python3.11 --versio</code>
使用cd命令导航到包含虚拟环境的目录。例如，如果您的虚拟环境位于/home/user/venv目录中，请运行以下命令：
<code>cd /home/user/venv</code>
激活虚拟环境。对于Python 3，您可以使用以下命令：
<code>source bin/activate</code>
这将激活虚拟环境，并将您的命令提示符更改为显示虚拟环境的名称。
现在，您已经激活了虚拟环境，可以在其中安装和使用Python包。要退出虚拟环境，请运行以下命令：
<code>deactivate</code>
是在虚拟环境中使用python3.11命令似乎不起作用。这是因为虚拟环境默认不会使用系统中安装的Python版本。要在虚拟环境中使用Python 3.11，您需要在创建虚拟环境时指定Python 3.11的路径。
首先，退出当前虚拟环境：
<code>deactivate</code>
然后，使用以下命令创建一个新的虚拟环境，并指定Python 3.11的路径：
<code>python3.11 -m venv venv</code>
这将使用Python 3.11创建一个名为venv的新虚拟环境。
接下来，激活新创建的虚拟环境：
<code>source venv/bin/activate</code>
现在，您应该可以在虚拟环境中使用Python 3.11了。要验证Python 3.11是否已成功安装并可以使用，请运行以下命令：
<code>python --version</code>
输出应显示Python 3.11的版本信息。请注意，在虚拟环境中，您可以使用python命令而不是python3.11来运行Python 3.11。这是因为虚拟环境会自动将python命令映射到指定的Python版本。</p>
<h2 id="_2">其他</h2>
<p>增加执行权限：<code>chmod +x mysql_install.sh</code></p>
<h2 id="mysql">迁移mysql</h2>
<pre><code>MySQL服务器密码和数据库密码是两个不同的概念，它们分别用于不同的目的：
MySQL服务器密码：这是用于登录到MySQL服务器的root用户的密码。当您安装MySQL服务器并进行初始配置时，您需要设置此密码。您可以使用此密码登录到MySQL服务器，以便执行管理任务，例如创建新的数据库、用户和权限。MySQL服务器密码与特定数据库无关，它允许您访问整个MySQL服务器。
数据库密码：这是针对特定数据库用户的密码。在MySQL中，每个数据库用户都有一个与之关联的密码。当您为特定数据库创建用户并授予访问权限时，您需要为该用户设置密码。数据库密码仅允许该用户访问与其关联的数据库，而不是整个MySQL服务器。
这两种密码的主要区别在于它们的作用范围。MySQL服务器密码用于访问整个服务器，而数据库密码仅允许访问特定数据库。在实际应用中，通常会为不同的应用程序或服务创建不同的数据库用户，并为每个用户分配适当的权限和密码。这有助于提高安全性，因为即使某个用户的密码被泄露，攻击者也只能访问与该用户关联的数据库，而不是整个MySQL服务器。
</code></pre>
<p>检查MySQL是否已安装：<code>mysql --version</code>
检查MySQL服务是否正在运行：
对于基于Systemd的系统（如CentOS 7及更高版本、Ubuntu 16.04及更高版本）
<code>systemctl status mysqld</code></p>
<p>对于基于SysVinit的系统（如CentOS 6、Ubuntu 14.04及更低版本）
<code>service mysqld status</code>
如果MySQL服务正在运行，您将看到类似于Active: active (running)的状态信息。如果服务未运行，您将看到类似于Active: inactive (dead)的状态信息。
如果MySQL服务未运行，您可以使用以下命令启动它：
对于基于Systemd的系统（如CentOS 7及更高版本、Ubuntu 16.04及更高版本）
<code>systemctl start mysqld</code>
对于基于SysVinit的系统（如CentOS 6、Ubuntu 14.04及更低版本）
<code>service mysqld start</code>
要检查MySQL服务是否正在监听端口（默认为3306），您可以使用netstat命令：
<code>netstat -tuln | grep 3306</code>
登录到MySQL服务器：
<code>mysql -u root -p</code>
在此命令中，-u参数指定要使用的用户名（在本例中为root），-p参数表示将提示输入密码。输入密码后，您将进入MySQL命令行界面。
创建一个新的数据库：
<code>CREATE DATABASE my_database;</code>
将my_database替换为您要创建的数据库名称。
选择要使用的数据库：
<code>USE my_database;</code>
将my_database替换为您要使用的数据库名称。
退出MySQL命令行界面：
<code>EXIT;</code></p>
<p>如果您忘记了root用户的密码，可以通过以下步骤重置密码：
停止MySQL服务：
对于基于Systemd的系统（如CentOS 7及更高版本、Ubuntu 16.04及更高版本）
<code>sudo systemctl stop mysqld</code></p>
<p>对于基于SysVinit的系统（如CentOS 6、Ubuntu 14.04及更低版本）
<code>sudo service mysqld stop</code>
启动MySQL服务，跳过权限检查：
<code>sudo mysqld_safe --skip-grant-tables &amp;</code>
登录到MySQL服务器：
<code>mysql -u root</code>
重置root用户的密码：
<code>FLUSH PRIVILEGES;
ALTER USER 'root'@'localhost' IDENTIFIED BY 'new_password';</code>
将new_password替换为您要设置的新密码。
退出MySQL命令行界面：
<code>EXIT;</code>
停止跳过权限检查的MySQL服务：
<code>sudo killall mysqld</code>
重新启动MySQL服务：
对于基于Systemd的系统（如CentOS 7及更高版本、Ubuntu 16.04及更高版本）
<code>sudo systemctl start mysqld</code>
对于基于SysVinit的系统（如CentOS 6、Ubuntu 14.04及更低版本）
<code>sudo service mysqld start</code>
现在，您应该能够使用新密码登录到MySQL服务器：
<code>mysql -u root -p</code></p>
<h2 id="uwsgi">uwsgi</h2>
<p>如果你使用了虚拟环境，那么你必须使用虚拟环境的Python解释器安装uWSGI！也就是说，你的Django代码使用的哪个Python解释器，你的uWSGI服务器也必须使用同一个解释器。
解压文件
<code>tar -zxvf uwsgi</code>
进入解压目录
<code>sudo python3 setup.py install</code>
对于 CentOS/RHEL 系统：
<code>sudo yum install python3-devel</code>
安装完成后，重新编译 uWSGI。如果您已经编译过 uWSGI，请确保先清理之前的编译结果，然后重新编译。在 uWSGI 源码目录中执行以下命令：
<code>make clean</code>
<code>python3 setup.py install</code>
编译完成后，您应该可以在虚拟环境中找到 uwsgi 命令。如果仍然找不到，请确保您的虚拟环境已激活，并检查 uwsgi 是否已安装在虚拟环境的 bin 目录中。如果不在那里，您可能需要将其添加到您的 PATH 环境变量中。例如：
<code>export PATH=$PATH:/path/to/your/virtualenv/bin</code>
将 /path/to/your/virtualenv 替换为实际的虚拟环境路径。然后，您应该能够运行 uwsgi 命令。</p>
<p>检查进程<code>ps aux | grep uwsgi</code>
杀死uwsgi进程
<code>sudo killall -9 uwsgi</code></p>
<h2 id="settings">settings配置</h2>
<p>ALLOWED_HOSTS = ['plan.yunduanjianzhan.cn', 'www.plan.yunduanjianzhan.cn']</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../translator/" class="btn btn-neutral float-left" title="流媒体"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../codeplan/" class="btn btn-neutral float-right" title="计划表项目搭建">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../translator/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../codeplan/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
