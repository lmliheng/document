{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"index.html","title":"Hello , \u200b\u6211\u200b\u662f\u200b\u6052","text":""},{"location":"index.html#_1","title":"\u6587\u6863","text":"<p>\u200b\u53c2\u8003\u200b\u5b98\u65b9\u200b\u6587\u6863\u200b</p>"},{"location":"index.html#_2","title":"\u4e00\u952e\u200b\u90e8\u7f72","text":"<p>\u200b\u4e00\u952e\u200b\u90e8\u7f72\u200bpsql14\uff1a<code>curl -O https://heng1.oss-cn-beijing.aliyuncs.com/psql_install.sh &amp;&amp; bash psql_install.sh</code></p> <p>\u200b\u4fee\u6539\u200b\u5bc6\u7801\u200b\uff1a <pre><code>[root@RainYun-mjzwJWoB ~]# sudo -u postgres psql -c \"ALTER USER postgres WITH PASSWORD 'postgres';\"\ncould not change directory to \"/root\"\nALTER ROLE\n[root@RainYun-mjzwJWoB ~]# \n</code></pre></p> <p>\u200b\u811a\u672c\u200b\u914d\u7f6e\u200b\u9ed8\u8ba4\u200b\u8d26\u53f7\u200b\uff1a<code>postgres</code>,\u200b\u4fee\u6539\u200b\u540e\u200b\u5bc6\u7801\u200b\uff1a<code>postgres</code></p>"},{"location":"index.html#_3","title":"\u68c0\u67e5\u200b\u8f6f\u4ef6\u200b\u8def\u5f84","text":"<pre><code>[root@RainYun-Q7c3pCXM pgsql-14]# cd /var/lib/pgsql/14\n[root@RainYun-Q7c3pCXM 14]# ls\nbackups  data  initdb.log\n[root@RainYun-Q7c3pCXM 14]# cd /usr/pgsql-14\n[root@RainYun-Q7c3pCXM pgsql-14]# ls\nbin  lib  share\n</code></pre>"},{"location":"backup.html","title":"\u5907\u4efd","text":""},{"location":"backup.html#_1","title":"\u5907\u4efd\u200b\u4e0e\u200b\u8fd8\u539f","text":"<p>PostgreSQL\uff08psql\uff09\u200b\u6570\u636e\u5e93\u200b\u8fc1\u79fb\u200b\u5230\u200b\u53e6\u4e00\u53f0\u200b\u670d\u52a1\u5668\u200b</p> <p>\u200b\u5728\u200b\u6e90\u200b\u670d\u52a1\u5668\u200b\u4e0a\u200b\u4f7f\u7528\u200bpg_dump\u200b\u547d\u4ee4\u200b\u5907\u4efd\u200b\u6570\u636e\u5e93\u200b\u3002\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200bSQL\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5176\u4e2d\u200b\u5305\u542b\u200b\u6570\u636e\u5e93\u200b\u7684\u200b\u7ed3\u6784\u200b\u548c\u200b\u6570\u636e\u200b <pre><code>pg_dump -U \u200b\u7528\u6237\u540d\u200b -h \u200b\u6e90\u200b\u670d\u52a1\u5668\u200b\u4e3b\u673a\u540d\u200b -p \u200b\u6e90\u200b\u670d\u52a1\u5668\u7aef\u200b\u53e3\u53f7\u200b -F t \u200b\u6570\u636e\u5e93\u200b\u540d\u200b &gt; \u200b\u5907\u4efd\u6587\u4ef6\u200b\u540d\u200b.sql\n\u200b\u5982\u4e0b\u200b\npg_dump -U postgres -h localhost -p 5432 -F t mydb &gt; mydb_backup.sql\n</code></pre> \u200b\u8fd9\u200b\u5c06\u200b\u5728\u200b\u5f53\u524d\u76ee\u5f55\u200b\u4e0b\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u540d\u4e3a\u200bmydb_backup.sql\u200b\u7684\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5176\u4e2d\u200b\u5305\u542b\u200bmydb\u200b\u6570\u636e\u5e93\u200b\u7684\u200b\u7ed3\u6784\u200b\u548c\u200b\u6570\u636e\u200b</p> <p>\u200b\u5c06\u200b\u5907\u4efd\u6587\u4ef6\u200b\u4f20\u8f93\u200b\u5230\u200b\u76ee\u6807\u200b\u670d\u52a1\u5668\u200b\uff0c\u200b\u5728\u200b\u76ee\u6807\u200b\u670d\u52a1\u5668\u200b\u4e0a\u200b\u521b\u5efa\u200b\u65b0\u200b\u6570\u636e\u5e93\u200b\uff1a</p> <p>\u200b\u5728\u200b\u76ee\u6807\u200b\u670d\u52a1\u5668\u200b\u4e0a\u200b\uff0c\u200b\u4f7f\u7528\u200bpsql\u200b\u547d\u4ee4\u884c\u200b\u754c\u9762\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u65b0\u200b\u7684\u200b\u6570\u636e\u5e93\u200b\uff0c\u200b\u6062\u590d\u200b\u5907\u4efd\u6587\u4ef6\u200b\uff1a</p> <p>\u200b\u4f7f\u7528\u200bpg_restore\u200b\u547d\u4ee4\u200b\u5c06\u200b\u5907\u4efd\u6587\u4ef6\u200b\u6062\u590d\u200b\u5230\u200b\u65b0\u521b\u5efa\u200b\u7684\u200b\u6570\u636e\u5e93\u200b\u4e2d\u200b\u3002\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u4e00\u4e2a\u200b\u793a\u4f8b\u200b\u547d\u4ee4\u200b\uff1a <pre><code>pg_restore -U \u200b\u76ee\u6807\u200b\u670d\u52a1\u5668\u200b\u7528\u6237\u540d\u200b -h \u200b\u76ee\u6807\u200b\u670d\u52a1\u5668\u200b\u4e3b\u673a\u540d\u200b -p \u200b\u76ee\u6807\u200b\u670d\u52a1\u5668\u7aef\u200b\u53e3\u53f7\u200b -d \u200b\u65b0\u200b\u6570\u636e\u5e93\u200b\u540d\u200b -1 /path/to/\u200b\u5907\u4efd\u6587\u4ef6\u200b\u540d\u200b.sql\n\u200b\u5982\u4e0b\u200b\npg_restore -U postgres -h localhost -p 5432 -d mydb_new -1 /home/user/mydb_backup.sql\n</code></pre> \u200b\u8fd9\u200b\u5c06\u200b\u628a\u200b\u5907\u4efd\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u6570\u636e\u200b\u548c\u200b\u7ed3\u6784\u200b\u6062\u590d\u200b\u5230\u200b\u65b0\u521b\u5efa\u200b\u7684\u200b\u6570\u636e\u5e93\u200b\u4e2d\u200b\u3002</p> <p>\u200b\u6700\u540e\u200b\u9a8c\u8bc1\u200b\u6570\u636e\u200b\u8fc1\u79fb\u200b\uff0c\u200b\u67e5\u8be2\u200b\u6570\u636e\u200b\u4ee5\u200b\u786e\u4fdd\u200b\u6570\u636e\u200b\u8fc1\u79fb\u200b\u6210\u529f\u200b</p>"},{"location":"connect.html","title":"\u8fde\u63a5","text":""},{"location":"connect.html#_1","title":"\u8fde\u63a5","text":"<p>\u200b\u67e5\u770b\u200b\u7248\u672c\u200b <pre><code>psql -V\n</code></pre></p> <p>\u200b\u67e5\u770b\u200bPostgreSQL\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff1a <pre><code>sudo vim /etc/postgresql/&lt;version&gt;/main/postgresql.conf\n\u200b\u67e5\u627e\u200b\uff1asudo find / -type f -name \"postgresql.conf\" 2&gt;/dev/null\n</code></pre></p> <p>\u200b\u767b\u5f55\u200bPostgreSQL\uff1a \u200b\u4f60\u200b\u53ef\u4ee5\u200b\u5c1d\u8bd5\u200b\u4ee5\u200bPostgreSQL\u200b\u7684\u200b\u7528\u6237\u200b\u8eab\u4efd\u200b\u767b\u5f55\u200b\u6570\u636e\u5e93\u200b\u6765\u200b\u8fdb\u4e00\u6b65\u200b\u9a8c\u8bc1\u200b\u670d\u52a1\u200b\u72b6\u6001\u200b\u3002\u200b\u9996\u5148\u200b\u5207\u6362\u200b\u5230\u200bPostgreSQL\u200b\u7528\u6237\u200b\uff1a <pre><code>sudo su - postgres\n</code></pre> \u200b\u6216\u8005\u200b psql -U \u200b\u7528\u6237\u540d\u200b -h \u200b\u4e3b\u673a\u540d\u200b -p \u200b\u7aef\u53e3\u53f7\u200b\uff0c\u200b\u8f93\u5165\u200b\u5bc6\u7801\u200b\u540e\u200b\u5c06\u200b\u8fdb\u5165\u200bpsql\u200b\u547d\u4ee4\u884c\u200b\u754c\u9762\u200b \u200b\u4f8b\u5982\u200b\uff1a <pre><code>psql -U postgres -h localhost -p 5432\n</code></pre></p> <p>\u200b\u7136\u540e\u200b\u5c1d\u8bd5\u200b\u76f4\u63a5\u200b\u8fdb\u5165\u200bPostgreSQL\u200b\u7684\u200b\u4ea4\u4e92\u5f0f\u200b\u7ec8\u7aef\u200b\uff1a <pre><code>psql\n</code></pre></p> <p>\u200b\u67e5\u770b\u200b\u6570\u636e\u5e93\u200b\u72b6\u6001\u200b\uff1a <pre><code>\\conninfo\n</code></pre></p>"},{"location":"crud.html","title":"\u64cd\u4f5c","text":""},{"location":"crud.html#_1","title":"\u6570\u636e\u5e93","text":""},{"location":"crud.html#_2","title":"\u521b\u5efa\u200b\u6570\u636e\u5e93","text":"<pre><code> CREATE DATABASE heng;\n# \u200b\u6216\u8005\u200b\u6307\u660e\u200b\u7f16\u7801\u200b\n CREATE DATABASE heg WITH ENCODING 'UTF8' LC_COLLATE = 'en_US.UTF-8' LC_CTYPE = 'en_US.UTF-8';\n</code></pre>"},{"location":"crud.html#_3","title":"\u5220\u9664\u200b\u6570\u636e\u5e93","text":"<pre><code>DROP DATABASE template\n</code></pre>"},{"location":"crud.html#_4","title":"\u67e5\u770b\u200b\u6570\u636e\u5e93","text":"<pre><code>\\l\n</code></pre>"},{"location":"crud.html#_5","title":"\u8fde\u63a5\u200b\u6570\u636e\u5e93","text":"<p>\u200b\u53ef\u4ee5\u200b\u8fde\u63a5\u200b\u4e5f\u200b\u53ef\u200b\u5207\u6362\u200b <pre><code>\\c \u200b\u6570\u636e\u5e93\u200b\u540d\u200b\n</code></pre> \u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u8fde\u63a5\u200b\u7684\u200b\u6570\u636e\u5e93\u200b<code>\\c</code></p>"},{"location":"crud.html#_6","title":"\u5907\u4efd\u200b\u6570\u636e\u5e93","text":"<p><pre><code>pg_dump -h &lt;host&gt; -p &lt;port&gt; -U&lt;username&gt; -F t&lt;database&gt; &gt; &lt;backup_file&gt;\n</code></pre> \u200b\u5c06\u200b\u3001\u3001\u3001\u200b\u548c\u200b\u66ff\u6362\u200b\u4e3a\u200b\u60a8\u200b\u7684\u200bPostgreSQL\u200b\u6570\u636e\u5e93\u200b\u7684\u200b\u5b9e\u9645\u200b\u503c\u200b\u548c\u200b\u5907\u4efd\u6587\u4ef6\u200b\u540d\u200b\u3002 <p>\u200b\u6062\u590d\u200b\u6570\u636e\u5e93\u200b\uff1a <pre><code>pg_restore -h &lt;host&gt; -p &lt;port&gt; -U&lt;username&gt; -d&lt;database&gt; -1 &lt;backup_file&gt;\n</code></pre> \u200b\u5c06\u200b\u3001\u3001\u3001\u200b\u548c\u200b\u66ff\u6362\u200b\u4e3a\u200b\u60a8\u200b\u7684\u200bPostgreSQL\u200b\u6570\u636e\u5e93\u200b\u7684\u200b\u5b9e\u9645\u200b\u503c\u200b\u548c\u200b\u5907\u4efd\u6587\u4ef6\u200b\u540d\u200b\u3002 <p>\u200b\u67e5\u770b\u200bPostgreSQL\u200b\u65e5\u5fd7\u200b\uff1a <pre><code>sudo tail -f /var/log/postgresql/postgresql-&lt;version&gt;-main.log\n</code></pre> \u200b\u5c06\u200b\u66ff\u6362\u200b\u4e3a\u200b\u60a8\u200b\u7684\u200bPostgreSQL\u200b\u7248\u672c\u200b\u3002"},{"location":"crud.html#_7","title":"\u5185\u90e8","text":""},{"location":"crud.html#_8","title":"\u67e5\u770b\u200b\u8868\u200b\u60c5\u51b5","text":"<p>\u200b\u67e5\u770b\u200b\u8fde\u63a5\u200b\u6570\u636e\u5e93\u200b\u7684\u200b\u6240\u6709\u200b\u8868\u200b\u60c5\u51b5\u200b <pre><code>\\d\n</code></pre></p>"},{"location":"crud.html#_9","title":"\u67e5\u770b\u200b\u5177\u4f53\u8868\u200b\u7ed3\u6784","text":"<pre><code>\\d \u200b\u8868\u540d\u200b\n</code></pre>"},{"location":"crud.html#_10","title":"\u67e5\u770b\u200b\u7d22\u5f15","text":"<pre><code>\\di \u200b\u8868\u540d\u200b\n</code></pre>"},{"location":"crud.html#_11","title":"\u67e5\u770b\u200b\u89c6\u56fe","text":"<pre><code>\\dv\n</code></pre>"},{"location":"crud.html#_12","title":"\u67e5\u770b\u200b\u51fd\u6570","text":"<pre><code>\\df\n</code></pre>"},{"location":"crud.html#_13","title":"\u67e5\u770b\u200b\u89e6\u53d1\u5668","text":"<p><pre><code>\\dy \u200b\u8868\u540d\u200b\n# \u200b\u4f8b\u5982\u200b\uff1a\\dy users\n</code></pre> \u200b\u8fd9\u200b\u5c06\u200b\u663e\u793a\u200b\u8868\u200b\u7684\u200b\u89e6\u53d1\u5668\u200b\u5217\u8868\u200b\uff0c\u200b\u5305\u62ec\u200b\u89e6\u53d1\u5668\u200b\u540d\u200b\u3001\u200b\u89e6\u53d1\u5668\u200b\u4e8b\u4ef6\u200b\u3001\u200b\u89e6\u53d1\u5668\u200b\u51fd\u6570\u200b\u7b49\u200b\u4fe1\u606f\u200b\u3002</p>"},{"location":"crud.html#_14","title":"\u67e5\u770b\u200b\u7edf\u8ba1\u200b\u4fe1\u606f","text":"<p><pre><code>\\d+ \u200b\u8868\u540d\u200b\n# \u200b\u4f8b\u5982\u200b\uff1a\\d+ users\n</code></pre> \u200b\u8fd9\u200b\u5c06\u200b\u663e\u793a\u200b\u8868\u200b\u7684\u200b\u8be6\u7ec6\u4fe1\u606f\u200b\uff0c\u200b\u5305\u62ec\u200b\u8868\u200b\u7684\u200b\u5927\u5c0f\u200b\u3001\u200b\u884c\u200b\u6570\u200b\u3001\u200b\u81ea\u52a8\u200b\u589e\u957f\u200b\u7b49\u200b\u4fe1\u606f\u200b\u3002</p>"},{"location":"crud.html#_15","title":"\u7528\u6237","text":""},{"location":"crud.html#_16","title":"\u521b\u5efa\u200b\u7528\u6237","text":"<p><pre><code>createuser -P -R -S&lt;username&gt;\n</code></pre> -P\u200b\u8868\u793a\u200b\u63d0\u793a\u200b\u8f93\u5165\u200b\u5bc6\u7801\u200b\uff0c-R\u200b\u8868\u793a\u200b\u4e0d\u200b\u5141\u8bb8\u200b\u7528\u6237\u200b\u521b\u5efa\u200b\u65b0\u200b\u7684\u200b\u6570\u636e\u5e93\u200b\uff0c-S\u200b\u8868\u793a\u200b\u4e0d\u200b\u5141\u8bb8\u200b\u7528\u6237\u200b\u521b\u5efa\u200b\u65b0\u200b\u7684\u200b\u6570\u636e\u5e93\u200b\u7528\u6237\u200b\u3002</p>"},{"location":"crud.html#_17","title":"\u5220\u9664\u200b\u6570\u636e\u5e93\u200b\u7528\u6237","text":"<p><pre><code>dropuser &lt;username&gt;\n</code></pre> \u200b\u5c06\u200b\u66ff\u6362\u200b\u4e3a\u200b\u60a8\u200b\u8981\u200b\u5220\u9664\u200b\u7684\u200b\u7528\u6237\u540d"},{"location":"crud.html#_18","title":"\u4fee\u6539\u200b\u6570\u636e\u5e93\u200b\u7528\u6237\u200b\u5bc6\u7801","text":"<pre><code>psql -c \"ALTER USER&lt;username&gt; WITH PASSWORD '&lt;new_password&gt;';\"\n# \u200b\u6216\u8005\u200b\u5728\u200bpsql\u200b\u4e0b\u200b\uff1aALTER USER&lt;username&gt; WITH PASSWORD '&lt;new_password&gt;';\n</code></pre>"},{"location":"example.html","title":"\u6848\u4f8b","text":""},{"location":"example.html#_1","title":"\u5907\u4efd","text":"<pre><code>[root@RainYun-gst9yeON ~]# sudo -u postgres psql\ncould not change directory to \"/root\"\npsql (9.2.24, server 14.12)\nWARNING: psql version 9.2, server version 14.0.\n         Some psql features might not work.\nType \"help\" for help.\n\npostgres=# ALTER USER postgres WITH PASSWORD 'postgres';\nALTER ROLE\npostgres=# CREATE DATABASE wiki;\nCREATE DATABASE\npostgres=# \\l\n                                  List of databases\n   Name    |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges   \n-----------+----------+----------+-------------+-------------+-----------------------\n postgres  | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | \n template0 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +\n           |          |          |             |             | postgres=CTc/postgres\n template1 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +\n           |          |          |             |             | postgres=CTc/postgres\n wiki      | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | \n(4 rows)\n\npostgres=# \\q\n[root@RainYun-gst9yeON ~]# psql -U postgres -h localhost -p 5432 -d wiki &lt; /root/wiki_backup.sql\n</code></pre>"},{"location":"example.html#_2","title":"\u6ce8\u610f\u200b\u521b\u5efa\u200b\u6570\u636e\u5e93","text":"<p>\u200b\u6267\u884c\u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b\u64cd\u4f5c\u524d\u200b\u7a7a\u4e00\u683c\u200b <pre><code>postgres-# CREATE DATABASE template;\nERROR:  syntax error at or near \"CREATE\"\nLINE 2: CREATE DATABASE template;\n        ^\npostgres=#  CREATE DATABASE template;\nCREATE DATABASE\npostgres=# \n</code></pre></p>"},{"location":"psql.html","title":"\u5ba2\u6237\u7aef","text":""},{"location":"psql.html#psql","title":"psql\u200b\u5ba2\u6237\u7aef","text":"<p>\u200b\u5ba2\u6237\u7aef\u200bPSQL\u200b\u4e0e\u200b\u6570\u636e\u5e93\u200b\u7248\u672c\u200b\u4e0d\u200b\u5339\u914d\u200b <pre><code>postgres-# \\c\npsql (9.2.24, server 14.12)\nWARNING: psql version 9.2, server version 14.0.\n         Some psql features might not work.\nYou are now connected to database \"postgres\" as user \"postgres\".\npostgres-# \\q\n</code></pre></p>"},{"location":"server.html","title":"\u670d\u52a1","text":""},{"location":"server.html#postgresql","title":"\u68c0\u67e5\u200bPostgreSQL\u200b\u8fdb\u7a0b","text":"<p>\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u6765\u200b\u67e5\u770b\u200b\u662f\u5426\u200b\u6709\u200bPostgreSQL\u200b\u8fdb\u7a0b\u200b\u6b63\u5728\u200b\u8fd0\u884c\u200b\uff1a <pre><code>ps -ef | grep postgres\n</code></pre></p>"},{"location":"server.html#_1","title":"\u68c0\u67e5\u200b\u76d1\u542c\u200b\u7aef\u53e3\u200b\uff1a","text":"<p>\u200b\u68c0\u67e5\u200bPostgreSQL\u200b\u9ed8\u8ba4\u200b\u7aef\u53e3\u200b5432\u200b\u662f\u5426\u200b\u5df2\u200b\u88ab\u200b\u76d1\u542c\u200b\uff1a <pre><code>netstat -tuln | grep 5432\n</code></pre> \u200b\u5982\u679c\u200b\u7aef\u53e3\u200b\u5904\u4e8e\u200b\u76d1\u542c\u200b\u72b6\u6001\u200b\uff0c\u200b\u8bf4\u660e\u200bPostgreSQL\u200b\u670d\u52a1\u200b\u5df2\u7ecf\u200b\u542f\u52a8\u200b\u5e76\u4e14\u200b\u5728\u200b\u7b49\u5f85\u200b\u8fde\u63a5\u200b\u3002</p>"},{"location":"server.html#postgresql_1","title":"\u542f\u52a8\u200b\u505c\u6b62\u200bPostgreSQL\u200b\u670d\u52a1","text":"<pre><code>sudo systemctl start/stop postgresql-14.service\n</code></pre>"},{"location":"server.html#postgresql_2","title":"\u67e5\u770b\u200bPostgreSQL\u200b\u670d\u52a1\u200b\u72b6\u6001","text":"<pre><code>systemctl status postgresql-14\n</code></pre>"}]}